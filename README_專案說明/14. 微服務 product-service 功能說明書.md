**功能說明書：Product Service**

**概述**
Product Service 是一個用於管理商品的 Node.js 應用，通過 RESTful API 提供商品的增刪查改功能。應用以 Express 框架為基礎，並使用 MySQL 資料庫來存儲商品資料，配合 MySQL 連線池進行資料庫連接。此服務也包含前端 CRUD 頁面，讓使用者能夠視覺化管理商品。

### 1. Product Service 主文件：`k8s-shopping-site_2_nodejs_mysql\product-service\src\product-service.js`
* **架構**：基於 Express 框架，提供一系列 REST API 路由。
* **資料庫連接**：通過 MySQL 連線池 `promisePool`，管理資料庫連接，增強效能與連接可靠性。
* **環境變數管理**：使用 `dotenv` 模組載入 `.env` 配置文件，以動態取得資料庫及服務器配置信息。

#### 功能
* **獲取所有商品** - `GET /products`
  - 查詢所有商品資料，若無資料返回 404 錯誤。

* **獲取單個商品** - `GET /products/:id`
  - 依照商品 ID 查詢特定商品，若無此商品返回 404 錯誤。

* **新增商品** - `POST /products`
  - 將新商品數據插入到資料庫，操作包含交易機制，若失敗則回滾。成功時返回新增的商品數據。

* **更新商品** - `PUT /products/:id`
  - 依據商品 ID 更新商品資料，更新成功後返回更新後的數據。

* **刪除商品** - `DELETE /products/:id`
  - 依據商品 ID 刪除特定商品，若無此商品則返回 404 錯誤。

### 2. Product CRUD 前端頁面：`k8s-shopping-site_2_nodejs_mysql\web-client\src\components\ProductCRUDPage\ProductCRUDPage.js`
* **技術框架**：使用 React 及 Bootstrap Table 建立 CRUD 頁面。
* **API 通信**：通過 Axios 發送 API 請求，管理商品數據，包括新增、更新、刪除、獲取商品。
* **資料狀態管理**：利用 React 的 `useState` 和 `useEffect` 管理產品資料及表單狀態，透過事件觸發與更新資料表視圖。

### 3. 單元測試
* **Product Service 測試文件**：`k8s-shopping-site_2_nodejs_mysql\product-service\test\product.test.js`
  - 使用 Chai 進行 API 單元測試，包含測試 `GET`, `POST`, `PUT`, `DELETE` 路由功能。
* **前端測試文件**：`k8s-shopping-site_2_nodejs_mysql\web-client\test\ProductCRUDPage.test.js`
  - 使用 React Testing Library 測試前端渲染，驗證 `ProductCRUDPage` 正確顯示。

### 4. Docker 配置：`k8s-shopping-site_2_nodejs_mysql\product-service\Dockerfile`
* **構建階段**：基於 Node.js 14，安裝必要的依賴並複製程式碼。
* **最小化映像階段**：使用 `--only=production` 安裝生產依賴，最小化容器大小。
* **服務端口**：暴露 3003 埠。
* **啟動命令**：使用 `node src/product-service.js` 啟動 Express 應用。