### 功能說明書：MySQL 連線池管理

---

#### 檔案路徑
- `k8s-shopping-site_2_nodejs_mysql\dbConnectionPool.js`

---

### 功能概述
此模組負責管理 MySQL 資料庫的連線池，提升連線效率，並確保在高並發的情境下能夠穩定地提供資料庫服務。透過 `mysql2` 套件，此模組建立一個可供整個系統使用的連線池，以便共享資料庫連線資源並減少連線開銷。

---

### 全域變數載入
1. **環境變數**：使用 `dotenv` 載入 `.env` 檔案中的環境變數，其中包含資料庫主機 `EC2_PRIVATE_IP`。
2. **路徑設定**：透過 `fileURLToPath` 和 `dirname` 動態取得當前文件路徑，便於 `.env` 檔案的正確載入。

---

### MySQL 連線池設置
1. **參數設定**：
   - **host**：由 `.env` 檔案中的 `EC2_PRIVATE_IP` 設定資料庫主機。
   - **user**：設置為 `root` 使用者。
   - **password**：使用 `mysql` 密碼進行驗證。
   - **database**：指定資料庫名稱為 `ShoppingSiteDB`。

2. **連線池參數**：
   - **waitForConnections**：當連線池達到最大連線數時，是否等待可用連線。此處設置為 `true`。
   - **connectionLimit**：最大同時連線數，設為 `10`，表示最多允許 10 個連線同時處理請求。
   - **queueLimit**：隊列限制，設為 `0` 表示不限制等候連線的請求數量。

3. **Promise-based Pool**：
   - 使用 `pool.promise()` 轉換為 Promise-based 的連線池 `promisePool`，以便支援非同步的 `async/await` 操作，使程式碼更具可讀性且便於錯誤處理。

---

### 模組導出
- 將 `promisePool` 作為預設導出，以便其他模組可以透過 `import` 使用此連線池來進行資料庫操作。