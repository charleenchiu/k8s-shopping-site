## 功能說明書：初始化資料庫

### 檔案路徑
`C:\charleen\LearnDevops\k8s-shopping-site_3_python_nosql\init_db.py`

### 功能概述
`init_db.py` 是一個用於初始化 MongoDB 資料庫的 Python 腳本。該腳本負責連接到指定的 MongoDB 實例，創建所需的資料庫及其集合（相當於關聯型資料庫中的資料表），並設置唯一索引以確保資料的一致性。

### 功能詳述

1. **載入環境變數**
   - 使用 `dotenv` 套件載入 `.env` 檔案中的環境變數，這些變數包含應用程式所需的設定，例如 EC2 私有 IP。

2. **連接到 MongoDB**
   - 根據環境變數中的 EC2 私有 IP，創建與 MongoDB 的連接。使用的 URI 格式為 `mongodb://{ec2_private_ip}:27017/`。

3. **創建資料庫**
   - 定義資料庫名稱為 `ShoppingSiteDB`，並創建或選擇該資料庫。

4. **創建資料集合**
   - 在 `ShoppingSiteDB` 資料庫中創建以下資料集合：
     - `users`: 存儲客戶資料，並設置 `id` 欄位為唯一索引。
     - `products`: 存儲商品資料，並設置 `id` 欄位為唯一索引。
     - `order_details`: 存儲訂單細項資料，並設置 `id` 欄位為唯一索引。
     - `orders`: 存儲訂單資料，並設置 `id` 欄位為唯一索引。
     - `payments`: 存儲付款資料，並設置 `id` 欄位為唯一索引。

5. **成功訊息**
   - 在成功創建資料庫及其集合後，印出訊息 `Database and collections created successfully`，以確認初始化操作成功完成。

6. **關閉 MongoDB 連線**
   - 在腳本執行結束時，自動關閉與 MongoDB 的連線以釋放資源。

### 使用說明
要運行此腳本，請確保已安裝必要的 Python 套件，並設置 `.env` 檔案中包含有效的 EC2 私有 IP。運行腳本後，將創建所需的資料庫和集合，並設置唯一索引。

### 依賴項
- `pymongo`: 用於連接和操作 MongoDB。
- `dotenv`: 用於從 `.env` 檔案載入環境變數。