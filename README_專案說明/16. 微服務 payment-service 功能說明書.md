**功能說明書：Payment Service**

**概述**  
Payment Service 是一個用於管理付款的 Node.js 應用，提供 RESTful API 以支持付款的查詢、增加、更新與刪除功能。此應用基於 Express 框架，並使用 MySQL 資料庫儲存付款資料，並以 MySQL 連線池加速連接。該服務包含後端和前端的 CRUD 管理頁面，幫助使用者視覺化管理付款紀錄。

---

### 1. Payment Service 主文件：`k8s-shopping-site_2_nodejs_mysql\payment-service\src\payment-service.js`
* **架構**：基於 Express 框架，提供一系列 REST API 路由。
* **資料庫連接**：通過 MySQL 連線池 `promisePool` 來管理資料庫連接，確保效能與穩定性。
* **環境變數管理**：使用 `dotenv` 模組載入 `.env` 配置文件，並取得服務器配置信息。

#### 功能
* **獲取所有付款** - `GET /payments`
  - 查詢所有付款紀錄，若無資料返回空列表。

* **獲取指定付款** - `GET /payments/:id`
  - 根據付款 ID 查詢特定紀錄，若無此資料返回 404 錯誤。

* **新增付款** - `POST /payments`
  - 插入新的付款資料至資料庫，成功時返回該筆新增數據。

* **更新付款** - `PUT /payments/:id`
  - 更新指定付款 ID 的紀錄，並返回更新後的資料。

* **刪除付款** - `DELETE /payments/:id`
  - 刪除指定 ID 的付款紀錄，成功時返回 204 無內容狀態碼。

---

### 2. Payment CRUD 前端頁面：`k8s-shopping-site_2_nodejs_mysql\web-client\src\components\PaymentCRUDPage\PaymentCRUDPage.js`
* **技術框架**：使用 React 及 Bootstrap Table 建立 CRUD 頁面。
* **API 通信**：通過 Axios 與 API 進行通信，包含新增、更新、刪除和獲取付款資料。
* **狀態管理**：使用 React 的 `useState` 和 `useEffect` 來管理付款資料和表單狀態，並透過事件處理更新表格視圖。

---

### 3. 單元測試
* **Payment Service 測試文件**：`k8s-shopping-site_2_nodejs_mysql\payment-service\test\payment.test.js`
  - 使用 Chai 和 Chai-HTTP 進行 API 單元測試，測試 `GET`, `POST`, `PUT`, `DELETE` 路由功能。
* **前端測試文件**：`k8s-shopping-site_2_nodejs_mysql\web-client\test\PaymentCRUDPage.test.js`
  - 使用 React Testing Library 驗證前端是否正確渲染 `PaymentCRUDPage` 頁面。

---

### 4. Docker 配置：`k8s-shopping-site_2_nodejs_mysql\payment-service\Dockerfile`
* **構建階段**：基於 Node.js 14，安裝所有依賴並複製程式碼。
* **最小化映像**：僅安裝生產依賴，以減少容器大小。
* **服務端口**：暴露 3003 埠口。
* **啟動命令**：使用 `node src/payment-service.js` 啟動 Express 應用。