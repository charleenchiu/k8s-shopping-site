# 功能說明書：Order Service
`order-service` 相關檔案的功能說明書，分別針對 `app.py`、`OrderCRUDPage.py`、`test_order-service.py` 和 `Dockerfile` 進行描述。

## 概述
Order Service 負責處理與訂單相關的所有操作，包括查詢、創建、更新和刪除訂單。此服務使用 Flask 框架搭建，並與 MongoDB 資料庫進行互動，以儲存和管理訂單資料。

## 主要功能

### 1. 取得所有訂單
**API 路徑**：`GET /orders`  
**功能說明**：從資料庫中查詢所有訂單並返回。  
**回傳格式**：
- 成功：返回包含所有訂單的 JSON 陣列。
- 失敗：返回錯誤訊息及 HTTP 狀態碼 500。

### 2. 取得單一訂單
**API 路徑**：`GET /orders/<order_id>`  
**功能說明**：根據訂單 ID 查詢特定訂單的詳細資訊。  
**回傳格式**：
- 成功：返回該訂單的 JSON 物件。
- 失敗：
  - 訂單不存在：返回錯誤訊息及 HTTP 狀態碼 404。
  - 其他錯誤：返回錯誤訊息及 HTTP 狀態碼 500。

### 3. 新增訂單
**API 路徑**：`POST /orders`  
**功能說明**：創建新的訂單，需提供使用者 ID、訂單時間及訂單詳細資料。  
**請求格式**：
```json
{
  "userId": <使用者ID>,
  "orderTime": "YYYY-MM-DDTHH:MM:SSZ",
  "details": [
    {
      "productId": <商品ID>,
      "quantity": <數量>
    }
  ]
}
```
**回傳格式**：
- 成功：返回新創建訂單的 JSON 物件，包含訂單 ID。
- 失敗：返回錯誤訊息及 HTTP 狀態碼 500。

### 4. 更新訂單
**API 路徑**：`PUT /orders/<order_id>`  
**功能說明**：根據訂單 ID 更新現有的訂單資訊。  
**請求格式**：
```json
{
  "userId": <使用者ID>,
  "orderTime": "YYYY-MM-DDTHH:MM:SSZ",
  "details": [
    {
      "productId": <商品ID>,
      "quantity": <數量>
    }
  ]
}
```
**回傳格式**：
- 成功：返回更新後的訂單 JSON 物件。
- 失敗：
  - 訂單不存在：返回錯誤訊息及 HTTP 狀態碼 404。
  - 其他錯誤：返回錯誤訊息及 HTTP 狀態碼 500。

### 5. 刪除訂單
**API 路徑**：`DELETE /orders/<order_id>`  
**功能說明**：根據訂單 ID 刪除指定的訂單。  
**回傳格式**：
- 成功：返回 HTTP 狀態碼 204（無內容）。
- 失敗：
  - 訂單不存在：返回錯誤訊息及 HTTP 狀態碼 404。
  - 其他錯誤：返回錯誤訊息及 HTTP 狀態碼 500。

## 環境變數
- `MONGO_URI`：MongoDB 的連線字串，應在 `.env` 檔案中設定。
- `ORDER_SERVICE_PORT`：指定 Order Service 運行的埠號，預設為 3003。

## Docker 配置
Order Service 使用 Docker 建立容器，Dockerfile 定義了必要的依賴安裝及環境配置：
- 基礎映像：`python:3.9-slim`
- 工作目錄設為 `/usr/src/app`
- 開放埠號 3003，並啟動 Flask 應用。