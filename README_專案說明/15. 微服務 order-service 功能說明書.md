**功能說明書：Order Service**

**概述**
Order Service 是一個用於管理訂單的 Node.js 應用，通過 RESTful API 提供訂單的增刪查改功能。應用以 Express 框架為基礎，並使用 MySQL 資料庫來存儲訂單資料，通過 MySQL 連線池進行資料庫連接，以確保效能與穩定性。此服務也包含前端 CRUD 頁面，讓使用者能夠視覺化管理訂單。

### 1. Order Service 主文件：`k8s-shopping-site_2_nodejs_mysql\order-service\src\order-service.js`
* **架構**：基於 Express 框架，提供一系列 REST API 路由。
* **資料庫連接**：通過 MySQL 連線池 `promisePool`，有效管理資料庫連接，增強效能與連接可靠性。
* **環境變數管理**：使用 `dotenv` 模組載入 `.env` 配置文件，動態獲取資料庫及伺服器的配置信息。

#### 功能
* **查詢所有訂單** - `GET /orders`
  - 查詢所有訂單資料，若無資料則返回 404 錯誤。

* **查詢單個訂單** - `GET /orders/:id`
  - 依照訂單 ID 查詢特定訂單資料，若無此訂單則返回 404 錯誤。

* **新增訂單** - `POST /orders`
  - 新增一筆訂單並插入詳細資料，包括產品 ID 和數量。若成功，返回新建的訂單資料，失敗則進行資料回滾。

* **更新訂單** - `PUT /orders/:id`
  - 根據訂單 ID 更新訂單資料及其詳細內容，成功後返回更新後的資料。

* **刪除訂單** - `DELETE /orders/:id`
  - 根據訂單 ID 刪除指定訂單及其詳細內容，若無此訂單則返回 404 錯誤。

### 2. Order CRUD 前端頁面：`k8s-shopping-site_2_nodejs_mysql\web-client\src\components\OrderCRUDPage\OrderCRUDPage.js`
* **技術框架**：使用 React 及 Bootstrap Table 建立 CRUD 頁面。
* **API 通信**：通過 Axios 發送 API 請求，管理訂單資料，包括新增、更新、刪除、查詢訂單。
* **資料狀態管理**：利用 React 的 `useState` 和 `useEffect` 管理訂單資料和表單狀態，透過事件觸發更新表格視圖。

### 3. 單元測試
* **Order Service 測試文件**：`k8s-shopping-site_2_nodejs_mysql\order-service\test\order.test.js`
  - 使用 Chai 及 Chai-HTTP 進行 API 單元測試，包含測試 `GET`, `POST`, `PUT`, `DELETE` 路由功能。
* **前端測試文件**：`k8s-shopping-site_2_nodejs_mysql\web-client\test\OrderCRUDPage.test.js`
  - 使用 React Testing Library 測試前端渲染，驗證 `OrderCRUDPage` 正確顯示。

### 4. Docker 配置：`k8s-shopping-site_2_nodejs_mysql\order-service\Dockerfile`
* **構建階段**：基於 Node.js 14，安裝必要的依賴並複製程式碼。
* **最小化映像階段**：使用 `--only=production` 安裝生產依賴，最小化容器大小。
* **服務端口**：暴露 3004 埠。
* **啟動命令**：使用 `node src/order-service.js` 啟動 Express 應用。