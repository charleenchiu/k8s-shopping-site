## 功能說明書：User Service
`user-service` 相關檔案的功能說明書，分別針對 `app.py`、`UserCRUDPage.py`、`test_user-service.py` 和 `Dockerfile` 進行描述。

### 1. `app.py`

#### 功能概述
`app.py` 是一個使用 Flask 框架開發的 Web 應用程式，提供使用者相關的 API。該應用程式連接到 MongoDB 數據庫，並支援 CRUD（創建、讀取、更新、刪除）操作，讓用戶能夠管理其帳戶資訊。

#### 主要功能
- **取得所有使用者資料**
  - 路由：`/users`
  - 方法：`GET`
  - 描述：從 MongoDB 的 `users` 集合中獲取所有使用者的資料，並以 JSON 格式返回。

- **透過 ID 取得特定使用者資料**
  - 路由：`/users/<user_id>`
  - 方法：`GET`
  - 描述：根據指定的使用者 ID 從 MongoDB 中獲取使用者的資料。如果找不到該使用者，返回 404 錯誤。

#### 環境變數
- `MONGO_URL`: MongoDB 連接的 URL，預設為 `mongodb://localhost:27017`。
- `USER_SERVICE_PORT`: 使用者服務監聽的埠號，預設為 `3001`。

### 2. `UserCRUDPage.py`

#### 功能概述
`UserCRUDPage.py` 提供完整的使用者資料管理 API，支援對使用者資料的新增、更新和刪除操作，並能獲取所有使用者資料。

#### 主要功能
- **管理使用者**
  - 路由：`/users`
  - 方法：`GET`, `POST`
  - 描述：
    - `GET`: 獲取所有使用者資料（排除 `_id` 欄位），並以 JSON 格式返回。
    - `POST`: 接收使用者資料，並將其插入到 MongoDB 的 `users` 集合中，返回新增的使用者資料。

- **使用者詳細操作**
  - 路由：`/users/<user_id>`
  - 方法：`PUT`, `DELETE`
  - 描述：
    - `PUT`: 根據使用者 ID 更新其資料。
    - `DELETE`: 根據使用者 ID 刪除該使用者資料，並返回刪除確認信息。

#### 環境變數
- `MONGO_URI`: MongoDB 連接的 URI，預設為 `mongodb://localhost:27017/`。

### 3. `test_user-service.py`

#### 功能概述
`test_user-service.py` 是一個單元測試模組，使用 `unittest` 框架來測試 `user-service` 的 API 功能。這些測試確保應用程式的可靠性與正確性。

#### 主要功能
- **測試所有使用者資料的獲取**
  - 測試路由：`/users`
  - 驗證返回狀態碼為 200，並確認返回資料類型為列表。

- **測試特定使用者資料的獲取**
  - 測試路由：`/users/<id>`
  - 驗證返回狀態碼為 200，並確認返回資料類型為字典，以及 `_id` 屬性符合預期。

- **測試當使用者不存在的情況**
  - 測試路由：`/users/<id>` (隨機生成不存在的 ID)
  - 驗證返回狀態碼為 404。

### 4. `Dockerfile`

#### 功能概述
`Dockerfile` 定義了如何建構 `user-service` 的 Docker 映像，包括所需的依賴和環境設置。

#### 主要功能
- **基礎映像**
  - 使用 Python 3.9-slim 作為基礎映像。

- **工作目錄設定**
  - 設定工作目錄為 `/usr/src/app`。

- **依賴安裝**
  - 複製當前目錄內容到容器的工作目錄，並安裝 `requirements.txt` 中列出的 Python 套件。

- **開放服務埠**
  - 開放埠 `3001`，以便外部請求訪問 Flask 應用程式。

- **環境變數設定**
  - 設定 Flask 應用為啟動模式，並指定監聽的主機和埠號。